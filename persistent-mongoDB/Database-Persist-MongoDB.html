<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Database.Persist.MongoDB</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Database-Persist-MongoDB.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">persistent-mongoDB-1.1.4: Backend for the persistent library using mongoDB.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Database.Persist.MongoDB</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Entity conversion
</a></li><li><a href="#g:2">MongoDB specific Filters
</a></li><li><a href="#g:3">using connections
</a><ul><li><a href="#g:4">using raw MongoDB pipes
</a></li></ul></li><li><a href="#g:5">Key conversion helpers
</a></li><li><a href="#g:6">network type
</a></li><li><a href="#g:7">MongoDB driver types
</a></li><li><a href="#g:8">Database.Persist
</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Use persistent-mongodb the same way you would use other persistent
 libraries and refer to the general persistent documentation.
 There are some new MongoDB specific filters under the filters section.
 These help extend your query into a nested document.
</p><p>However, at some point you will find the normal Persistent APIs lacking.
 and want lower level-level MongoDB access.
 There are functions available to make working with the raw driver
 easier: they are under the Entity conversion section.
 You should still use the same connection pool that you are using for Persistent. 
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:entityToFields">entityToFields</a> :: <span class="keyword">forall</span> record. PersistEntity record =&gt; record -&gt; [Field]</li><li class="src short"><a href="#v:toInsertFields">toInsertFields</a> :: <span class="keyword">forall</span> record. PersistEntity record =&gt; record -&gt; [Field]</li><li class="src short"><a href="#v:docToEntityEither">docToEntityEither</a> :: <span class="keyword">forall</span> record. PersistEntity record =&gt; Document -&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Either.html#t:Either">Either</a> Text (Entity record)</li><li class="src short"><a href="#v:docToEntityThrow">docToEntityThrow</a> :: <span class="keyword">forall</span> m record. (MonadIO m, PersistEntity record) =&gt; Document -&gt; m (Entity record)</li><li class="src short"><a href="#v:-45--62-.">(-&gt;.)</a> :: <span class="keyword">forall</span> val nes nes1. PersistEntity nes1 =&gt; EntityField val nes1 -&gt; EntityField nes1 nes -&gt; NestedField val nes</li><li class="src short"><a href="#v:-126--62-.">(~&gt;.)</a> :: <span class="keyword">forall</span> val nes nes1. PersistEntity nes1 =&gt; EntityField val nes1 -&gt; NestedField nes1 nes -&gt; NestedField val nes</li><li class="src short"><a href="#v:-63--45--62-.">(?-&gt;.)</a> :: <span class="keyword">forall</span> val nes nes1. PersistEntity nes1 =&gt; EntityField val (<a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Maybe.html#t:Maybe">Maybe</a> nes1) -&gt; EntityField nes1 nes -&gt; NestedField val nes</li><li class="src short"><a href="#v:-63--126--62-.">(?~&gt;.)</a> :: <span class="keyword">forall</span> val nes nes1. PersistEntity nes1 =&gt; EntityField val (<a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Maybe.html#t:Maybe">Maybe</a> nes1) -&gt; NestedField nes1 nes -&gt; NestedField val nes</li><li class="src short"><a href="#v:nestEq">nestEq</a> :: <span class="keyword">forall</span> v typ. (PersistField typ, PersistEntityBackend v ~ <a href="Database-Persist-MongoDB.html#t:MongoBackend">MongoBackend</a>) =&gt; NestedField v typ -&gt; typ -&gt; Filter v</li><li class="src short"><a href="#v:multiEq">multiEq</a> :: <span class="keyword">forall</span> v typ. (PersistField typ, PersistEntityBackend v ~ <a href="Database-Persist-MongoDB.html#t:MongoBackend">MongoBackend</a>) =&gt; EntityField v [typ] -&gt; typ -&gt; Filter v</li><li class="src short"><a href="#v:withMongoDBConn">withMongoDBConn</a> :: (MonadIO m, <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Applicative.html#t:Applicative">Applicative</a> m) =&gt; Database -&gt; <a href="Database-Persist-MongoDB.html#t:HostName">HostName</a> -&gt; <a href="Database-Persist-MongoDB.html#t:PortID">PortID</a> -&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Maybe.html#t:Maybe">Maybe</a> MongoAuth -&gt; <a href="/usr/local/share/doc/ghc/html/libraries/time-1.4/Data-Time-Clock.html#t:NominalDiffTime">NominalDiffTime</a> -&gt; (<a href="Database-Persist-MongoDB.html#t:ConnectionPool">ConnectionPool</a> -&gt; m b) -&gt; m b</li><li class="src short"><a href="#v:withMongoDBPool">withMongoDBPool</a> :: (MonadIO m, <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Applicative.html#t:Applicative">Applicative</a> m) =&gt; Database -&gt; <a href="Database-Persist-MongoDB.html#t:HostName">HostName</a> -&gt; <a href="Database-Persist-MongoDB.html#t:PortID">PortID</a> -&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Maybe.html#t:Maybe">Maybe</a> MongoAuth -&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="/usr/local/share/doc/ghc/html/libraries/time-1.4/Data-Time-Clock.html#t:NominalDiffTime">NominalDiffTime</a> -&gt; (<a href="Database-Persist-MongoDB.html#t:ConnectionPool">ConnectionPool</a> -&gt; m b) -&gt; m b</li><li class="src short"><a href="#v:createMongoDBPool">createMongoDBPool</a> :: (MonadIO m, <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Applicative.html#t:Applicative">Applicative</a> m) =&gt; Database -&gt; <a href="Database-Persist-MongoDB.html#t:HostName">HostName</a> -&gt; <a href="Database-Persist-MongoDB.html#t:PortID">PortID</a> -&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Maybe.html#t:Maybe">Maybe</a> MongoAuth -&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="/usr/local/share/doc/ghc/html/libraries/time-1.4/Data-Time-Clock.html#t:NominalDiffTime">NominalDiffTime</a> -&gt; m <a href="Database-Persist-MongoDB.html#t:ConnectionPool">ConnectionPool</a></li><li class="src short"><a href="#v:runMongoDBPool">runMongoDBPool</a> :: (MonadIO m, MonadBaseControl <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> m) =&gt; <a href="Database-Persist-MongoDB.html#t:AccessMode">AccessMode</a> -&gt; <a href="Database-Persist-MongoDB.html#t:Action">Action</a> m a -&gt; <a href="Database-Persist-MongoDB.html#t:ConnectionPool">ConnectionPool</a> -&gt; m a</li><li class="src short"><a href="#v:runMongoDBPoolDef">runMongoDBPoolDef</a> :: (MonadIO m, MonadBaseControl <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> m) =&gt; <a href="Database-Persist-MongoDB.html#t:Action">Action</a> m a -&gt; <a href="Database-Persist-MongoDB.html#t:ConnectionPool">ConnectionPool</a> -&gt; m a</li><li class="src short"><span class="keyword">type</span> <a href="#t:ConnectionPool">ConnectionPool</a> = Pool <a href="Database-Persist-MongoDB.html#t:Connection">Connection</a></li><li class="src short"><span class="keyword">data</span>  <a href="#t:Connection">Connection</a> </li><li class="src short"><span class="keyword">data</span>  <a href="#t:MongoConf">MongoConf</a>  = <a href="#v:MongoConf">MongoConf</a> {<ul class="subs"><li><a href="#v:mgDatabase">mgDatabase</a> :: Text</li><li><a href="#v:mgHost">mgHost</a> :: Text</li><li><a href="#v:mgPort">mgPort</a> :: <a href="Database-Persist-MongoDB.html#t:PortID">PortID</a></li><li><a href="#v:mgAuth">mgAuth</a> :: <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Maybe.html#t:Maybe">Maybe</a> MongoAuth</li><li><a href="#v:mgAccessMode">mgAccessMode</a> :: <a href="Database-Persist-MongoDB.html#t:AccessMode">AccessMode</a></li><li><a href="#v:mgPoolStripes">mgPoolStripes</a> :: <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Int.html#t:Int">Int</a></li><li><a href="#v:mgStripeConnections">mgStripeConnections</a> :: <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Int.html#t:Int">Int</a></li><li><a href="#v:mgConnectionIdleTime">mgConnectionIdleTime</a> :: <a href="/usr/local/share/doc/ghc/html/libraries/time-1.4/Data-Time-Clock.html#t:NominalDiffTime">NominalDiffTime</a></li></ul>}</li><li class="src short"><span class="keyword">data</span>  <a href="#t:MongoBackend">MongoBackend</a> </li><li class="src short"><span class="keyword">type</span> <a href="#t:PipePool">PipePool</a> = Pool Pipe</li><li class="src short"><a href="#v:createMongoDBPipePool">createMongoDBPipePool</a> :: (MonadIO m, <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Applicative.html#t:Applicative">Applicative</a> m) =&gt; <a href="Database-Persist-MongoDB.html#t:HostName">HostName</a> -&gt; <a href="Database-Persist-MongoDB.html#t:PortID">PortID</a> -&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="/usr/local/share/doc/ghc/html/libraries/time-1.4/Data-Time-Clock.html#t:NominalDiffTime">NominalDiffTime</a> -&gt; m <a href="Database-Persist-MongoDB.html#t:PipePool">PipePool</a></li><li class="src short"><a href="#v:runMongoDBPipePool">runMongoDBPipePool</a> :: (MonadIO m, MonadBaseControl <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> m) =&gt; <a href="Database-Persist-MongoDB.html#t:AccessMode">AccessMode</a> -&gt; Database -&gt; <a href="Database-Persist-MongoDB.html#t:Action">Action</a> m a -&gt; <a href="Database-Persist-MongoDB.html#t:PipePool">PipePool</a> -&gt; m a</li><li class="src short"><a href="#v:keyToOid">keyToOid</a> :: PersistEntity val =&gt; KeyBackend <a href="Database-Persist-MongoDB.html#t:MongoBackend">MongoBackend</a> val -&gt; ObjectId</li><li class="src short"><a href="#v:oidToKey">oidToKey</a> :: PersistEntity val =&gt; ObjectId -&gt; KeyBackend <a href="Database-Persist-MongoDB.html#t:MongoBackend">MongoBackend</a> val</li><li class="src short"><span class="keyword">type</span> <a href="#t:HostName">HostName</a> = <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-String.html#t:String">String</a></li><li class="src short"><span class="keyword">data</span>  <a href="#t:PortID">PortID</a> </li><li class="src short"><span class="keyword">data</span>  <a href="#t:Action">Action</a> m a</li><li class="src short"><span class="keyword">data</span>  <a href="#t:AccessMode">AccessMode</a> <ul class="subs"><li>= <a href="#v:ReadStaleOk">ReadStaleOk</a>  </li><li>| <a href="#v:UnconfirmedWrites">UnconfirmedWrites</a>  </li><li>| <a href="#v:ConfirmWrites">ConfirmWrites</a> GetLastError  </li></ul></li><li class="src short"><a href="#v:master">master</a> :: <a href="Database-Persist-MongoDB.html#t:AccessMode">AccessMode</a></li><li class="src short"><a href="#v:slaveOk">slaveOk</a> :: <a href="Database-Persist-MongoDB.html#t:AccessMode">AccessMode</a></li><li class="src short"><a href="#v:-61-:">(=:)</a> :: Val v =&gt; Label -&gt; v -&gt; Field</li></ul></div><div id="interface"><h1 id="g:1">Entity conversion
</h1><div class="top"><p class="src"><a name="v:entityToFields" class="def">entityToFields</a> :: <span class="keyword">forall</span> record. PersistEntity record =&gt; record -&gt; [Field]</p><div class="doc"><p>convert a PersistEntity into document fields.
 unlike <code><a href="Database-Persist-MongoDB.html#v:toInsertFields">toInsertFields</a></code>, nulls are included.
</p></div></div><div class="top"><p class="src"><a name="v:toInsertFields" class="def">toInsertFields</a> :: <span class="keyword">forall</span> record. PersistEntity record =&gt; record -&gt; [Field]</p><div class="doc"><p>convert a PersistEntity into document fields.
 for inserts only: nulls are ignored so they will be unset in the document.
 <code><a href="Database-Persist-MongoDB.html#v:entityToFields">entityToFields</a></code> includes nulls
</p></div></div><div class="top"><p class="src"><a name="v:docToEntityEither" class="def">docToEntityEither</a> :: <span class="keyword">forall</span> record. PersistEntity record =&gt; Document -&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Either.html#t:Either">Either</a> Text (Entity record)</p></div><div class="top"><p class="src"><a name="v:docToEntityThrow" class="def">docToEntityThrow</a> :: <span class="keyword">forall</span> m record. (MonadIO m, PersistEntity record) =&gt; Document -&gt; m (Entity record)</p></div><h1 id="g:2">MongoDB specific Filters
</h1><div class="doc"><p>You can find example usage for all of Persistent in our test cases:
 https:<em></em>github.com<em>yesodweb</em>persistent<em>blob</em>master<em>persistent-test</em>EmbedTest.hs#L144
</p><p>These filters create a query that reaches deeper into a document with
 nested fields.
</p></div><div class="top"><p class="src"><a name="v:-45--62-." class="def">(-&gt;.)</a> :: <span class="keyword">forall</span> val nes nes1. PersistEntity nes1 =&gt; EntityField val nes1 -&gt; EntityField nes1 nes -&gt; NestedField val nes</p><div class="doc"><p>Point to a nested field to query. Used for the final level of nesting with <code><a href="Database-Persist-MongoDB.html#v:nestEq">nestEq</a></code> or other operators.
</p></div></div><div class="top"><p class="src"><a name="v:-126--62-." class="def">(~&gt;.)</a> :: <span class="keyword">forall</span> val nes nes1. PersistEntity nes1 =&gt; EntityField val nes1 -&gt; NestedField nes1 nes -&gt; NestedField val nes</p><div class="doc"><p>Point to a nested field to query.
 This level of nesting is not the final level.
 Use (-&gt;.) to point to the final level is 
</p></div></div><div class="top"><p class="src"><a name="v:-63--45--62-." class="def">(?-&gt;.)</a> :: <span class="keyword">forall</span> val nes nes1. PersistEntity nes1 =&gt; EntityField val (<a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Maybe.html#t:Maybe">Maybe</a> nes1) -&gt; EntityField nes1 nes -&gt; NestedField val nes</p><div class="doc"><p>Same as (-&gt;.), but Works against a Maybe type
</p></div></div><div class="top"><p class="src"><a name="v:-63--126--62-." class="def">(?~&gt;.)</a> :: <span class="keyword">forall</span> val nes nes1. PersistEntity nes1 =&gt; EntityField val (<a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Maybe.html#t:Maybe">Maybe</a> nes1) -&gt; NestedField nes1 nes -&gt; NestedField val nes</p><div class="doc"><p>Same as (~&gt;.), but Works against a Maybe type
</p></div></div><div class="top"><p class="src"><a name="v:nestEq" class="def">nestEq</a> :: <span class="keyword">forall</span> v typ. (PersistField typ, PersistEntityBackend v ~ <a href="Database-Persist-MongoDB.html#t:MongoBackend">MongoBackend</a>) =&gt; NestedField v typ -&gt; typ -&gt; Filter v</p><div class="doc"><p>The normal Persistent equality test (==.) is not generic enough.
 Instead use this with the drill-down operaters (-&gt;.) or (?-&gt;.)
</p></div></div><div class="top"><p class="src"><a name="v:multiEq" class="def">multiEq</a> :: <span class="keyword">forall</span> v typ. (PersistField typ, PersistEntityBackend v ~ <a href="Database-Persist-MongoDB.html#t:MongoBackend">MongoBackend</a>) =&gt; EntityField v [typ] -&gt; typ -&gt; Filter v</p><div class="doc"><p>use to see if an embedded list contains an item
</p></div></div><h1 id="g:3">using connections
</h1><div class="top"><p class="src"><a name="v:withMongoDBConn" class="def">withMongoDBConn</a> :: (MonadIO m, <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Applicative.html#t:Applicative">Applicative</a> m) =&gt; Database -&gt; <a href="Database-Persist-MongoDB.html#t:HostName">HostName</a> -&gt; <a href="Database-Persist-MongoDB.html#t:PortID">PortID</a> -&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Maybe.html#t:Maybe">Maybe</a> MongoAuth -&gt; <a href="/usr/local/share/doc/ghc/html/libraries/time-1.4/Data-Time-Clock.html#t:NominalDiffTime">NominalDiffTime</a> -&gt; (<a href="Database-Persist-MongoDB.html#t:ConnectionPool">ConnectionPool</a> -&gt; m b) -&gt; m b</p></div><div class="top"><p class="src"><a name="v:withMongoDBPool" class="def">withMongoDBPool</a> :: (MonadIO m, <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Applicative.html#t:Applicative">Applicative</a> m) =&gt; Database -&gt; <a href="Database-Persist-MongoDB.html#t:HostName">HostName</a> -&gt; <a href="Database-Persist-MongoDB.html#t:PortID">PortID</a> -&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Maybe.html#t:Maybe">Maybe</a> MongoAuth -&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="/usr/local/share/doc/ghc/html/libraries/time-1.4/Data-Time-Clock.html#t:NominalDiffTime">NominalDiffTime</a> -&gt; (<a href="Database-Persist-MongoDB.html#t:ConnectionPool">ConnectionPool</a> -&gt; m b) -&gt; m b</p></div><div class="top"><p class="src"><a name="v:createMongoDBPool" class="def">createMongoDBPool</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (MonadIO m, <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Applicative.html#t:Applicative">Applicative</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; Database</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Database-Persist-MongoDB.html#t:HostName">HostName</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Database-Persist-MongoDB.html#t:PortID">PortID</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Maybe.html#t:Maybe">Maybe</a> MongoAuth</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>pool size (number of stripes)
</p></td></tr><tr><td class="src">-&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>stripe size (number of connections per stripe)
</p></td></tr><tr><td class="src">-&gt; <a href="/usr/local/share/doc/ghc/html/libraries/time-1.4/Data-Time-Clock.html#t:NominalDiffTime">NominalDiffTime</a></td><td class="doc"><p>time a connection is left idle before closing
</p></td></tr><tr><td class="src">-&gt; m <a href="Database-Persist-MongoDB.html#t:ConnectionPool">ConnectionPool</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a name="v:runMongoDBPool" class="def">runMongoDBPool</a> :: (MonadIO m, MonadBaseControl <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> m) =&gt; <a href="Database-Persist-MongoDB.html#t:AccessMode">AccessMode</a> -&gt; <a href="Database-Persist-MongoDB.html#t:Action">Action</a> m a -&gt; <a href="Database-Persist-MongoDB.html#t:ConnectionPool">ConnectionPool</a> -&gt; m a</p></div><div class="top"><p class="src"><a name="v:runMongoDBPoolDef" class="def">runMongoDBPoolDef</a> :: (MonadIO m, MonadBaseControl <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> m) =&gt; <a href="Database-Persist-MongoDB.html#t:Action">Action</a> m a -&gt; <a href="Database-Persist-MongoDB.html#t:ConnectionPool">ConnectionPool</a> -&gt; m a</p><div class="doc"><p>use default <code>AccessMode</code>
</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:ConnectionPool" class="def">ConnectionPool</a> = Pool <a href="Database-Persist-MongoDB.html#t:Connection">Connection</a></p></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Connection" class="def">Connection</a>  </p></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:MongoConf" class="def">MongoConf</a>  </p><div class="doc"><p>Information required to connect to a mongo database
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:MongoConf" class="def">MongoConf</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:mgDatabase" class="def">mgDatabase</a> :: Text</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:mgHost" class="def">mgHost</a> :: Text</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:mgPort" class="def">mgPort</a> :: <a href="Database-Persist-MongoDB.html#t:PortID">PortID</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:mgAuth" class="def">mgAuth</a> :: <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Maybe.html#t:Maybe">Maybe</a> MongoAuth</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:mgAccessMode" class="def">mgAccessMode</a> :: <a href="Database-Persist-MongoDB.html#t:AccessMode">AccessMode</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:mgPoolStripes" class="def">mgPoolStripes</a> :: <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Int.html#t:Int">Int</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:mgStripeConnections" class="def">mgStripeConnections</a> :: <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Int.html#t:Int">Int</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:mgConnectionIdleTime" class="def">mgConnectionIdleTime</a> :: <a href="/usr/local/share/doc/ghc/html/libraries/time-1.4/Data-Time-Clock.html#t:NominalDiffTime">NominalDiffTime</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:MongoConf" class="caption collapser" onclick="toggleSection('i:MongoConf')">Instances</p><div id="section.i:MongoConf" class="show"><table><tr><td class="src">PersistConfig <a href="Database-Persist-MongoDB.html#t:MongoConf">MongoConf</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:MongoBackend" class="def">MongoBackend</a>  </p><div class="subs instances"><p id="control.i:MongoBackend" class="caption collapser" onclick="toggleSection('i:MongoBackend')">Instances</p><div id="section.i:MongoBackend" class="show"><table><tr><td class="src">PathPiece (KeyBackend <a href="Database-Persist-MongoDB.html#t:MongoBackend">MongoBackend</a> entity)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h2 id="g:4">using raw MongoDB pipes
</h2><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:PipePool" class="def">PipePool</a> = Pool Pipe</p></div><div class="top"><p class="src"><a name="v:createMongoDBPipePool" class="def">createMongoDBPipePool</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (MonadIO m, <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Applicative.html#t:Applicative">Applicative</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Database-Persist-MongoDB.html#t:HostName">HostName</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Database-Persist-MongoDB.html#t:PortID">PortID</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>pool size (number of stripes)
</p></td></tr><tr><td class="src">-&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>stripe size (number of connections per stripe)
</p></td></tr><tr><td class="src">-&gt; <a href="/usr/local/share/doc/ghc/html/libraries/time-1.4/Data-Time-Clock.html#t:NominalDiffTime">NominalDiffTime</a></td><td class="doc"><p>time a connection is left idle before closing
</p></td></tr><tr><td class="src">-&gt; m <a href="Database-Persist-MongoDB.html#t:PipePool">PipePool</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>A pool of plain MongoDB pipes.
 The database parameter has not yet been applied yet.
 This is useful for switching between databases (on the same host and port)
 Unlike the normal pool, no authentication is available
</p></div></div><div class="top"><p class="src"><a name="v:runMongoDBPipePool" class="def">runMongoDBPipePool</a> :: (MonadIO m, MonadBaseControl <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> m) =&gt; <a href="Database-Persist-MongoDB.html#t:AccessMode">AccessMode</a> -&gt; Database -&gt; <a href="Database-Persist-MongoDB.html#t:Action">Action</a> m a -&gt; <a href="Database-Persist-MongoDB.html#t:PipePool">PipePool</a> -&gt; m a</p><div class="doc"><p>run a pool created with <code><a href="Database-Persist-MongoDB.html#v:createMongoDBPipePool">createMongoDBPipePool</a></code>
</p></div></div><h1 id="g:5">Key conversion helpers
</h1><div class="top"><p class="src"><a name="v:keyToOid" class="def">keyToOid</a> :: PersistEntity val =&gt; KeyBackend <a href="Database-Persist-MongoDB.html#t:MongoBackend">MongoBackend</a> val -&gt; ObjectId</p></div><div class="top"><p class="src"><a name="v:oidToKey" class="def">oidToKey</a> :: PersistEntity val =&gt; ObjectId -&gt; KeyBackend <a href="Database-Persist-MongoDB.html#t:MongoBackend">MongoBackend</a> val</p></div><h1 id="g:6">network type
</h1><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:HostName" class="def">HostName</a> = <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-String.html#t:String">String</a></p></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:PortID" class="def">PortID</a>  </p><div class="subs instances"><p id="control.i:PortID" class="caption collapser" onclick="toggleSection('i:PortID')">Instances</p><div id="section.i:PortID" class="show"><table><tr><td class="src"><a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Eq.html#t:Eq">Eq</a> <a href="Database-Persist-MongoDB.html#t:PortID">PortID</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Ord.html#t:Ord">Ord</a> <a href="Database-Persist-MongoDB.html#t:PortID">PortID</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Text-Show.html#t:Show">Show</a> <a href="Database-Persist-MongoDB.html#t:PortID">PortID</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">FromJSON <a href="Database-Persist-MongoDB.html#t:PortID">PortID</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:7">MongoDB driver types
</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Action" class="def">Action</a> m a </p><div class="subs instances"><p id="control.i:Action" class="caption collapser" onclick="toggleSection('i:Action')">Instances</p><div id="section.i:Action" class="show"><table><tr><td class="src">MonadTransControl <a href="Database-Persist-MongoDB.html#t:Action">Action</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">MonadTrans <a href="Database-Persist-MongoDB.html#t:Action">Action</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(MonadIO m, MonadBaseControl b m) =&gt; MonadBaseControl b (<a href="Database-Persist-MongoDB.html#t:Action">Action</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; MonadError Failure (<a href="Database-Persist-MongoDB.html#t:Action">Action</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">MonadBase b m =&gt; MonadBase b (<a href="Database-Persist-MongoDB.html#t:Action">Action</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Monad.html#t:Monad">Monad</a> (<a href="Database-Persist-MongoDB.html#t:Action">Action</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Monad.html#t:Functor">Functor</a> m =&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Monad.html#t:Functor">Functor</a> (<a href="Database-Persist-MongoDB.html#t:Action">Action</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Monad.html#t:Monad">Monad</a> m, <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Monad.html#t:Functor">Functor</a> m) =&gt; <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Applicative.html#t:Applicative">Applicative</a> (<a href="Database-Persist-MongoDB.html#t:Action">Action</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Applicative.html#t:Applicative">Applicative</a> m, <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Monad.html#t:Functor">Functor</a> m, MonadIO m, MonadBaseControl <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> m) =&gt; PersistUnique (<a href="Database-Persist-MongoDB.html#t:Action">Action</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Applicative.html#t:Applicative">Applicative</a> m, <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Monad.html#t:Functor">Functor</a> m, MonadIO m, MonadBaseControl <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> m) =&gt; PersistStore (<a href="Database-Persist-MongoDB.html#t:Action">Action</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Applicative.html#t:Applicative">Applicative</a> m, <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Monad.html#t:Functor">Functor</a> m, MonadIO m, MonadBaseControl <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> m) =&gt; PersistQuery (<a href="Database-Persist-MongoDB.html#t:Action">Action</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">MonadIO m =&gt; MonadIO (<a href="Database-Persist-MongoDB.html#t:Action">Action</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(MonadBaseControl <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> m, <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Applicative.html#t:Applicative">Applicative</a> m, <a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Control-Monad.html#t:Functor">Functor</a> m) =&gt; MonadDB (<a href="Database-Persist-MongoDB.html#t:Action">Action</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">MonadThrow m =&gt; MonadThrow (<a href="Database-Persist-MongoDB.html#t:Action">Action</a> m)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:AccessMode" class="def">AccessMode</a>  </p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ReadStaleOk" class="def">ReadStaleOk</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:UnconfirmedWrites" class="def">UnconfirmedWrites</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:ConfirmWrites" class="def">ConfirmWrites</a> GetLastError</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:AccessMode" class="caption collapser" onclick="toggleSection('i:AccessMode')">Instances</p><div id="section.i:AccessMode" class="show"><table><tr><td class="src"><a href="/usr/local/share/doc/ghc/html/libraries/base-4.5.0.0/Text-Show.html#t:Show">Show</a> <a href="Database-Persist-MongoDB.html#t:AccessMode">AccessMode</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:master" class="def">master</a> :: <a href="Database-Persist-MongoDB.html#t:AccessMode">AccessMode</a></p></div><div class="top"><p class="src"><a name="v:slaveOk" class="def">slaveOk</a> :: <a href="Database-Persist-MongoDB.html#t:AccessMode">AccessMode</a></p></div><div class="top"><p class="src"><a name="v:-61-:" class="def">(=:)</a> :: Val v =&gt; Label -&gt; v -&gt; Field</p></div><h1 id="g:8">Database.Persist
</h1></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.10.0</p></div></body></html>